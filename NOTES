Caveats:

  * This works with 5.0.75.  I haven't tried with 4.x nor 5.1.  I
    suspect that less than 4.1 won't work, due to lack of support for
    prepared statements.

Things to do:

  * All the parameters that you need to create a connection is a bit
    nasty.  I could go parse a JDBC-like string, but, ...

  * Thread-safety could be an issue here.  In my code, there's
    definitely a race condition between "prepare" and "disconnect",
    for example.  I haven't even *looked* at thread-safety issues for
    the MySQL driver.  I'm not sure if I should worry about it, or if
    we assume that's going to be dealt with at a higher level.

  * We might crash if someone opens a connection, prepares a
    statement, explicitly disconnects the connection, and then tries
    to play with the statement.

  * Verify that embedded null characters on bound parameter strings
    work correctly.

There's a little test program that runs a query and spews out the
results.  To compile it,

  ghc -idist/build -L/opt/local/lib/mysql5/mysql -lmysqlclient --make Test

I'm still trying to get the Makefile right so that it can build the
test sources: it's not there yet.  Here's how I've been doing it, for
now:

  cd testsrc
  ghc --make -package base-3.0.3.0 -package HUnit -package HDBC -Wall -i../dist/build -i.. -L/opt/local/lib/mysql5/mysql -lmysqlclient -o runtests runtests.hs

One issue is that I want the location of the MySQL library to come
from autoconf, rather than be hard-coded.
